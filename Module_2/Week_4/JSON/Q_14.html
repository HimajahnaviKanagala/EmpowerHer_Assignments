<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Todo List</h2>
    <input type="text" id="taskInput" placeholder="Enter a task">
    <button id="addTaskBtn">Add Task</button>
    <br><br>
    <input type="text" id="searchInput" placeholder="Seaech Tasks....">
    <ul id="taskList"></ul>
</body>
<script>
    let tasks=[];
    window.addEventListener("DOMContentLoaded",()=>{
        const storedTasks=localStorage.getItem("tasks");
        if(storedTasks){
            tasks=JSON.parse(storedTasks);
        }
        renderTasks();
    });

    const taskInput=document.getElementById("taskInput");
    const addTaskBtn=document.getElementById("addTaskBtn");
    const taskList=document.getElementById("taskList");
    const searchInput=document.getElementById("searchInput");

    addTaskBtn.addEventListener("click",()=>{
        const text=taskInput.value.trim();

        if(text===""){
            alert("please enter a task.");
            return;
        }
        const newTask={
            id:Date.now(),
            text:text,
            completed:false
        };

        tasks.push(newTask);
        saveTasks();
        renderTasks();

        taskInput.value="";
    });

    function renderTasks(filter=""){
        taskList.innerHTML="";
        tasks.filter(task=>task.text.toLowerCase().includes(filter.toLowerCase()))
             .forEach(task=>{
                const li=document.createElement("li");
                li.textContent=task.text;
                if(task.completed) li.classList.add("completed");

                const completeBtn=document.createElement("button");
                completeBtn.textContent="Complete";
                completeBtn.className="task-btn";
                completeBtn.addEventListener("click",()=>{
                    task.completed=!task.completed;
                    saveTasks();
                    renderTasks(searchInput.value);
                });

                const deleteBtn=document.createElement("button");
                deleteBtn.textContent="Delete";
                deleteBtn.className="task-btn";
                deleteBtn.addEventListener("click",()=>{
                    tasks=tasks.filter(t=>t.id !==task.id);
                    saveTasks();
                    renderTasks(searchInput.value);
                });

                li.appendChild(completeBtn);
                li.appendChild(deleteBtn);

                taskList.appendChild(li);
             });
    }

    function saveTasks(){
        localStorage.setItem("tasks", JSON.stringfy(tasks));
    }

    searchInput.addEventListener("input",()=>{
        const keyword=searchInput.value;
        renderTasks(keyword);
    });
</script>
</html>